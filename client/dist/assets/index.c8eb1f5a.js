var X=Object.defineProperty,Y=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var B=(a,n,e)=>n in a?X(a,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[n]=e,q=(a,n)=>{for(var e in n||(n={}))D.call(n,e)&&B(a,e,n[e]);if(h)for(var e of h(n))W.call(n,e)&&B(a,e,n[e]);return a},K=(a,n)=>Y(a,Z(n));var G=(a,n)=>{var e={};for(var l in a)D.call(a,l)&&n.indexOf(l)<0&&(e[l]=a[l]);if(a!=null&&h)for(var l of h(a))n.indexOf(l)<0&&W.call(a,l)&&(e[l]=a[l]);return e};import{r as u,j as r,M as g,R as J,a as s,P as F,b as ee,h as re,c as ae,d as Q,e as te,T as ne,f as oe,g as se}from"./vendor.54c7b037.js";const de=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function e(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerpolicy&&(d.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?d.credentials="include":o.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(o){if(o.ep)return;o.ep=!0;const d=e(o);fetch(o.href,d)}};de();const le=u.exports.forwardRef((l,e)=>{var o=l,{children:a}=o,n=G(o,["children"]);const d=u.exports.useRef(),{rotationAngle:m,rotationOrigin:v}=n;return u.exports.useEffect(()=>{const c=d.current;c&&(c.setRotationAngle(m),c.setRotationOrigin(v))},[m,v]),r(g,K(q({ref:c=>{d.current=c,e&&(e.current=c)}},n),{children:a}))});var me="/assets/airplane.720f0ae2.png",ue="/assets/loading.b2e29547.svg";const ce=({flightId:a,removeSpecificFlight:n})=>{var m,v,c,t,N,S,y,p,x,z,b,I,O,k,M,w,A,H,R,E,T,$,C,P,U,_,j,f;const[e,l]=u.exports.useState(null),o=(i,V)=>re.unix(i).utc().utcOffset(V).format("HH:mm"),d=async()=>{try{const i=await Q.get(`http://localhost:5500/api/v1/flights/${a}`);i.data.success&&l(i.data.flight)}catch(i){console.log(i)}};return u.exports.useEffect(()=>(d(),()=>{l(null)}),[a]),u.exports.useEffect(()=>{const i=setInterval(d,3e3);return()=>{clearInterval(i)}},[e]),r("div",{className:"SpecificFlight",children:e?s("div",{className:"SpecificFlight__container",children:[r(F,{positions:e==null?void 0:e.trails,pathOptions:{color:"#e48900",weight:3}}),s("div",{className:"SpecificFlight--upper",children:[r("div",{className:"close-btn",onClick:n,children:"\xD7"}),r("span",{className:"flight-number",children:e==null?void 0:e.flightNumber}),"/",r("span",{children:r("small",{className:"flight-callsign",children:e==null?void 0:e.callsign})}),r("p",{className:"flight-airline",children:(m=e==null?void 0:e.airline)==null?void 0:m.name})]}),r("img",{src:(e==null?void 0:e.aircraft.imageUrl)||"",className:"SpecificFlight__img"}),s("div",{className:"SpecificFlight--airport",children:[s("div",{className:"departure",children:[r("h2",{className:"iata",children:(v=e==null?void 0:e.departure)==null?void 0:v.iata}),r("h5",{className:"city",children:(t=(c=e==null?void 0:e.departure)==null?void 0:c.country)==null?void 0:t.city}),r(ee,{}),r("p",{className:"timezone",children:`${(N=e==null?void 0:e.departure)==null?void 0:N.timezone.abbr} (UTC ${((S=e==null?void 0:e.departure)==null?void 0:S.timezone.offsetHours.toString().startsWith("-"))?(y=e==null?void 0:e.departure)==null?void 0:y.timezone.offsetHours:"+"+((p=e==null?void 0:e.departure)==null?void 0:p.timezone.offsetHours)})`}),s("div",{className:"scheduled-time",children:[r("span",{children:"Scheduled"}),((x=e==null?void 0:e.time)==null?void 0:x.scheduled.departure)&&((z=e==null?void 0:e.time)==null?void 0:z.scheduled.arrival)?r("h4",{children:o((b=e==null?void 0:e.time)==null?void 0:b.scheduled.departure,e==null?void 0:e.departure.timezone.offset)}):"--"]}),e.status.live&&s("div",{className:"scheduled-time",children:[r("span",{children:"Actual"}),r("h4",{children:o((I=e==null?void 0:e.time)==null?void 0:I.real.departure,e==null?void 0:e.departure.timezone.offset)})]})]}),s("div",{className:"arrival",children:[r("h2",{className:"iata",children:(O=e==null?void 0:e.arrival)==null?void 0:O.iata}),r("h5",{className:"city",children:(M=(k=e==null?void 0:e.arrival)==null?void 0:k.country)==null?void 0:M.city}),r(ae,{}),r("p",{className:"timezone",children:`${(w=e==null?void 0:e.arrival)==null?void 0:w.timezone.abbr} (UTC ${((A=e==null?void 0:e.arrival)==null?void 0:A.timezone.offsetHours.toString().startsWith("-"))?(H=e==null?void 0:e.arrival)==null?void 0:H.timezone.offsetHours:"+"+((R=e==null?void 0:e.arrival)==null?void 0:R.timezone.offsetHours)})`}),s("div",{className:"scheduled-time",children:[r("span",{children:"Scheduled"}),((E=e==null?void 0:e.time)==null?void 0:E.scheduled.arrival)&&((T=e==null?void 0:e.time)==null?void 0:T.scheduled.arrival)?r("h4",{children:o(($=e==null?void 0:e.time)==null?void 0:$.scheduled.arrival,e==null?void 0:e.arrival.timezone.offset)}):"--"]}),s("div",{className:"scheduled-time",children:[r("span",{children:"Estimated"}),r("h4",{children:e.status.live?o(((C=e==null?void 0:e.time)==null?void 0:C.estimated.arrival)||((P=e==null?void 0:e.time)==null?void 0:P.scheduled.arrival),e==null?void 0:e.arrival.timezone.offset):o((U=e==null?void 0:e.time)==null?void 0:U.real.arrival,e==null?void 0:e.arrival.timezone.offset)})]})]})]}),r("div",{className:"divider"}),s("div",{className:"SpecificFlight--aircraft",children:[s("div",{children:[s("div",{className:"aircraft-type",children:["Aircraft Type ",s("small",{children:["(",(_=e==null?void 0:e.aircraft)==null?void 0:_.code,")"]})]}),r("h5",{className:"aircraft-text",children:(j=e==null?void 0:e.aircraft)==null?void 0:j.text})]}),r("div",{children:s("div",{className:"aircraft-reg",children:["Registration: ",s("small",{children:["(",(f=e==null?void 0:e.aircraft)==null?void 0:f.registration,")"]})]})})]}),r("div",{className:"divider"}),s("div",{className:"SpecificFlight--info",children:[s("div",{className:"altitude",children:[r("div",{children:"Altitude"}),s("h4",{children:[e==null?void 0:e.altitude," m"]})]}),s("div",{className:"speed",children:[r("div",{children:"Speed"}),s("h4",{children:[e==null?void 0:e.speed," km/h"]})]}),s("div",{className:"track",children:[r("div",{children:"Track"}),s("h4",{children:[e==null?void 0:e.angle,"\xB0"]})]}),s("div",{className:"status",children:[r("div",{children:"Status"}),r("h4",{children:(e==null?void 0:e.status.live)?"Live":"Not Live"})]})]})]}):r("img",{className:"loading--icon",src:ue,alt:"loading"})})};var ie=J.memo(ce);const ve=L.icon({iconUrl:me,iconSize:[30,30]}),Ne=()=>{const[a,n]=u.exports.useState([]),[e,l]=u.exports.useState(null),[o,d]=u.exports.useState(!1),m=async()=>{try{const t=await Q.get("http://localhost:5500/api/v1/flights");t.data.success&&n(t.data.flights)}catch(t){console.log(t)}};u.exports.useEffect(()=>{m()},[]),u.exports.useEffect(()=>{const t=setInterval(m,3e3);return()=>{clearInterval(t)}},[a]);const v=t=>{l(t),d(!0)};return s(te,{id:"flight-map",center:[48.77,9.18],zoom:5,children:[o&&r(ie,{flightId:e,removeSpecificFlight:()=>{l(null),d(!1)}}),r(ne,{attribution:'\xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(a==null?void 0:a.length)>0?a==null?void 0:a.map((t,N)=>r(le,{position:[(t==null?void 0:t.lat)||0,(t==null?void 0:t.long)||0],icon:ve,rotationAngle:t==null?void 0:t.angle,rotationOrigin:"center",eventHandlers:{click:()=>v(t==null?void 0:t.flightId)},riseOnHover:!0,children:r(oe,{direction:"top",children:r("strong",{children:(t==null?void 0:t.flightNumber)||(t==null?void 0:t.alternativeFlightNumber)})})},N)):""]})},he=()=>r("div",{className:"App",children:r(Ne,{})});se.render(r(J.StrictMode,{children:r(he,{})}),document.getElementById("root"));
